

A plan for the example problem is: 
Pick up b1, put down b1, stack b2 on top of b1, pick up b5, put down b5, stack b6 on top of b5, pick up b3, put down b3, stack b7 on top of b3, pick up b4, put down b4, stack b5 on top of b4, pick up b6, put down b6, stack b3 on top of b6, pick up b7, put down b7, and stack b4 on top of b7.